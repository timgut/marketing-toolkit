<script>
$(document).ready(function(){
  $('#new_user').validate({
    onkeyup: false,
    onfocusout: function(element) {$(element).valid();},
    errorElement : 'div',
    errorLabelContainer: '.errorTxt',
    rules: {
      'user[affiliate_id]': { required: true },
      'user[department]': { required: true },
      'user[email]': { required: true, email: true},
      'user[first_name]': { required: true },
      'user[last_name]': { required: true },
      'user[zip_code]': { required: true },
    },
    messages: {
      'user[email]': { email: "Please provide a valid email address.", required: "Email address is required." },
      'user[first_name]': { required: "First name is required." },  
      'user[last_name]': { required: "Last name is required." },
      'user[zip_code]': { required: "Zip code is required." },
      'user[affiliate_id]': { required: "Affiliate/council is required." },
      'user[department]': { required: "Department is required." },
    },
    submitHandler: function(form) {
      var recaptcha = grecaptcha.getResponse();
      //console.log(recaptcha);
      if (recaptcha === 'g-recaptcha-response' || recaptcha === '')  { // this means the "I'm not a robot" checkbox is empty
        $('#g-recaptcha-response-notify').show(); // show an error message specific to that
      }
      else {
        form.submit();
      }
   	}
  });
});
</script>

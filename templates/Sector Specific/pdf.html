<% 
  if @document.photo.present? and image = Image.find_by_url(@document.photo)
    case image.orientation
    when :portrait
      container_bg_size = "100% auto"
    when :landscape
      container_bg_size = "100% auto"
    end
  else
    container_bg_size = "100% auto"
  end
%>

<!DOCTYPE html>
<html>
<head>

<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700,800' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Lato:400,900" rel="stylesheet">

<link rel="stylesheet" href="http://toolkit-afscme.bytrilogy.com/print/css/reset.css" type="text/css" />
<link rel="stylesheet" href="http://toolkit-afscme.bytrilogy.com/print/css/dynamic-print-marks.css" type="text/css" />
<link rel="stylesheet" href="http://toolkit-afscme.bytrilogy.com/print/css/global.css" type="text/css" />
    
<style type="text/css">
.container {
  width: 8.5in;
  height: 11in;
  margin: auto;
  overflow: hidden;
  position: relative;  
}    
.show-print-marks .container {
  width: 9.25in;
  height: 11.75in;
  padding: .25in;
}
main {
  width: 100%;
  height: 100%;
  position: relative;
}
.background { 
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;
}
body { 
  font-family: 'Open Sans', Arial;
  font-weight: normal;
  font-weight: 300;
  text-align: center; 
  color: #404040;
  line-height: 1.4; 
  font-size: 11pt;
  text-rendering: optimizelegibility;
}

.background-image {
  width: 100%;
  height: 7.9in;
  background-size: <%= container_bg_size %>;
  background-repeat: no-repeat;
  background-position: center top;
  position: absolute;
  top: 2.1in;
}
.show-print-marks .background-image {
  height: 8.15in;
}
header {
  position: relative;
  height: 3.25in;
  overflow: hidden;
  z-index: 1000;
}
header .angle {
  background: white;
  position: absolute;
  width: 110%;
  height: 3.25in;
  top: -.6in;
  left: -5%;
  -ms-transform: rotate(-7.5deg); 
  -webkit-transform: rotate(-7.5deg); 
  transform: rotate(-7.5deg);
}  
header h1 {
  position: absolute;
  top: .5in;
  left: .5in;
  width: 7.5in;
  z-index: 1000;
  font-family:'Lato','Arial Black';
  font-weight: 900;
  color: #23408f;  
  text-transform: uppercase;
  font-size: 44pt;
  line-height: .95;
}
.show-print-marks header h1 {
  top: calc(.5in + .125in);
  left: calc(.5in + .125in);
}

header h1 small {
  font-size: 38pt;  
}
.csea header h1 {
  color: #004785;
}
header h1 span {
  display: block;
  font-weight: 300;
  color: #40ae49;  
}
.csea header span {
  color: #e03a3e;
}
.body {
  width: 4.5in;
  color: white;
  position: absolute;
  bottom: 1.75in;
  bottom: 1in;
  left: .75in;
  left: 0;
  padding: .25in .25in .5in .25in;
  background: rgba(0,0,0,.5);
}
.show-print-marks .body {
  width: calc(4.5in + .125in);
  padding-left: calc(.25in + .125in);
}

.body h2 {
  font-size: 15pt;
  line-height: 1;
  margin-bottom: .5em;
}
.quote {
  width: 2.5in;
  color: white;
  position: absolute;
  top: 3in;
  top: 1.8in;
  right: .5in;
  right: 0;
  padding: .75in .25in .25in .25in;
  background: rgba(0,0,0,.7);
}
.show-print-marks .quote {
  width: calc(2.5in + .125in);
  padding-right: calc(.25in + .125in);
}

.quote h2 {
  font-size: 24pt;
  line-height: 1;
  margin-bottom: .5em;
  font-family:'Lato','Arial Black';
  font-weight: 900;
  color: #40ae49;  
}
.csea .quote h2 {
  color: #e03a3e;
}
.quote .attribution {
  padding-left: 1em;
  position: relative;
}  
.quote .attribution::before {
  content:'-';
  position: absolute;
  top: 0;
  left: 0;
}
.quote h2:before {
  content: open-quote;
}
.quote h2:after {
  content: close-quote;
}
footer {
  position: absolute;
  left: 0;
  bottom: 0;
  height: 1.65in;
  width: 100%;
  overflow: hidden;
  z-index: 1000;
}
footer .angle {
  background-image: -webkit-linear-gradient(right, #009769 0%, #00a951 32.2%, #0158a3 100%);
  background-image: linear-gradient(right, #009769 0%, #00a951 32.2%, #0158a3 100%);  
  position: absolute;
  left: -5%;
  top: .32in;  
  width: 110%;
  height: 3in;
  -ms-transform: rotate(-4deg); 
  -webkit-transform: rotate(-4deg); 
  transform: rotate(-4deg);
}
.csea footer .angle {
  background-image: -webkit-linear-gradient(right, #004785 0%, #e03a3e 100%);
  background-image: linear-gradient(right, #004785 0%, #e03a3e 100%);
}
footer .url {
  width: 4in;
  height: .25in;  
  position: absolute;
  left: .25in;
  bottom: .3in;  
  z-index: 1000;
  color: #fff;
  font-size: 16pt;
}
.show-print-marks footer .url {
  left: calc(.25in + .125in);
  bottom: calc(.3in + .125in);  
}

footer .affiliate-logo {
  position: absolute;
  right: 1.65in;
  bottom: .3in;  
  width: 1.6in;
  height: .7in;
  border-right: 1px solid white;
  padding-right: .12in;
}
.show-print-marks footer .affiliate-logo {
  right: calc(1.65in + .125in);
  bottom: calc(.3in + .125in);  
}
footer .affiliate-logo div {
  width: 100%;
  height: 100%;
  background-repeat: no-repeat;
  background-position: center center;
  background-size: contain;
}
footer .main-logo  {
  background-image: url(http://toolkit-afscme.bytrilogy.com/print/img/afscme-reverse.png);
  background-repeat: no-repeat;
  background-position: center center;
  background-size: contain;
  background-size: contain;
  width: 1.3in;    
  height: .75in;    
  position: absolute;
  right: .15in;
  bottom: .3in;  
  z-index: 10000;
}
.show-print-marks footer .main-logo {
  right: calc(.15in + .125in);
  bottom: calc(.3in + .125in);  
}

.csea footer .main-logo  {
  background-image: url(http://toolkit-afscme.bytrilogy.com/print/img/csea-inverted.png);
  width: 1.2in;
}
footer .union-bug {
  position: absolute;
  right: .1in;
  bottom: .1in; 
  width: .6in;
  height: .2in;
  background: url('http://neverquit.afscme.org/theme/img/union-bug.png') no-repeat center center;
  background-size: contain;
}
.show-print-marks footer .union-bug {
  right: calc(.1in + .125in);
  bottom: calc(.1in + .125in);  
}

</style>

</head>

<body class="<%= 'show-print-marks ' if @document.crop_marks? %><%= @document.ss_branding %>">

<div class="container">

  <div class="trim-container">    
    <div class="print-marks trim top left"></div>
    <div class="print-marks bleed top left"></div>

    <div class="print-marks trim top right"></div>
    <div class="print-marks bleed top right"></div>

    <div class="print-marks trim bot left"></div>
    <div class="print-marks bleed bot left"></div>

    <div class="print-marks trim bot right"></div>
    <div class="print-marks bleed bot right"></div>
  </div>

  <main class="page1">
        <div class="top-bar"></div>

        <header>
          <div class="angle"></div>
          <div class="bar"></div>
          <h1><%= @document.headline.try(:html_safe) %></h1>
        </header>

        <figure class="background-image" style="background-image: url('<%= "#{@document.photo}" %>');"></figure>

        <article class="body"><%= @document.body.try(:html_safe) %></article>
        <aside class="quote"><%= @document.testimonial.try(:html_safe) %></aside>
        <div class="new-page"></div>
        <footer>
          <div class="angle"></div>
          <div class="url"><%= @document.ss_call_to_action %></div>
          <% unless @document.ss_affiliate_logo.blank? %>
            <div class="affiliate-logo">
              <div style="background-image: url('<%= "#{@document.ss_affiliate_logo}" %>');"></div>
            </div>
          <% end %>
          <div class="main-logo"></div>
          <div class="union-bug"></div>
        </footer>

  </main>

</div>

</body>
</html>
